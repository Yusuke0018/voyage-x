# Voyage - Personal Timeline App

最小×可変×スタイリッシュな個人用年表アプリケーション

## 🎯 プロジェクト全体像

### 製品ビジョン
Voyageは、ゴール（期日）までの距離感を一目で掴ませる"個人用年表"です。
- **コンセプト**: 最小×可変×スタイリッシュ
- **技術方針**: GitHub Pages + LocalStorageのみで軽快動作
- **非目標**: タスク管理、習慣機能、通知、オンライン同期、ユーザー管理、共同編集、分析ダッシュボード

### 三層構造
1. **ホーム（ビジョン一覧）**: タイトル、期日、カード表示
2. **年表（タイムライン）**: 横スクロール、月ラベル、現在地、期日ピン
3. **詳細（モーダル）**: マイルストーン編集、自由記述

### 四操作
- **追加**: ビジョン/マイルストーンの新規作成
- **編集**: タイトル、日付、説明の変更
- **移動**: ドラッグ＆ドロップで日付調整
- **削除**: 取り消し機能付き削除

### 三型マイルストーン
- **単日**: 点＋ラベル（YYYY/MM/DD）
- **月**: 点＋ラベル（YYYY/MM）
- **期間バー**: 帯＋ラベル（開始〜終了）

## 📊 実装進捗状況（2025-01-23 21:40）

### ✅ 完了済み機能（受入基準達成）

#### A. 基盤層
- **A1: 日付ユーティリティ** ✅
  - ISO形式への正規化（YYYY/M/D → YYYY-MM-DD）
  - 和式表示変換（2025年1月23日形式）
  - 月境界計算、うるう年判定
  - 月数差分計算
  
- **A2: 状態管理** ✅
  - State型定義（version, visions[], currentVisionId, theme）
  - ID自動採番（vision_xxx, ms_xxx形式）
  - 不変更新パターン実装
  - リスナー通知システム

#### B. 保存/復元層
- **B1: LocalStorageラッパー** ✅
  - 自動保存（状態変更時）
  - 容量警告（4MB以上で表示）
  - エラーハンドリング
  - サイズ計測機能
  
- **B2: JSON入出力** ✅
  - エクスポート（voyage-backup-YYYYMMDD.json）
  - インポート（置換/マージ選択）
  - ID衝突処理（上書き/スキップ/複製）
  - バリデーション（形式、バージョンチェック）

#### C. UI層
- **C1: ホーム画面** ✅
  - ビジョンカード一覧表示
  - 新規追加（タイトル、期日入力）
  - 編集（インライン）
  - 削除（確認ダイアログ付き）
  - カードクリックで年表遷移
  
- **C2: 年表画面** ✅
  - 横スクロール実装（等速）
  - 月ラベル背景表示
  - 現在地縦ライン（グラデーション）
  - 期日ピン固定（右上）
  - 四半期強調ライン（1,4,7,10月）
  
- **C3: マイルストーン機能** ✅
  - 3タイプ対応（単日/月/期間）
  - ドラッグ移動（マウス操作）
  - ダブルクリックで詳細表示
  - 位置から日付自動計算
  
- **C4: 詳細モーダル** ✅
  - 全項目編集可能
  - 型変換対応（単日↔月↔期間）
  - 自由記述（文字数無制限）
  - オートセーブ（1秒後）
  - 削除ボタン（モーダル内）
  
- **C5: テーマ機能** ✅
  - ダークテーマ「Midnight Neo」
  - ライトテーマ「Daylight Clean」
  - 右上トグルボタン（☀️/🌙）
  - 設定永続化

#### UX改善 ✅
- 削除取り消し（2秒間トースト）
- スケールインアニメーション（0.2秒）
- ホバーエフェクト
- レスポンシブ対応（768px閾値）
- キャッシュ強制クリア
- **期間バーリサイズ機能** ✅ NEW!
  - 両端ドラッグで開始/終了日調整
  - 月単位スナップ
- **マイルストーン重なり回避** ✅ NEW!
  - 自動高さ調整アルゴリズム
  - 最大8段階の配置
- **タッチデバイス対応** ✅ NEW!
  - タッチドラッグ
  - タッチリサイズ

## 🚀 次の実装タスク

### デプロイ準備完了 ✅

#### GitHub Pages設定（実施済み）
- `.github/workflows/deploy.yml` 作成済み
- 自動デプロイ設定完了
- **次の手順**:
  1. GitHubリポジトリの Settings → Pages
  2. Source: GitHub Actions を選択
  3. 数分待つと `https://yusuke0018.github.io/voyage-x/` で公開

### 残りの改善タスク

### 品質改善

#### 5. エラーハンドリング強化 🟢 優先度：低
**改善点**:
- 不正な日付入力時の詳細エラー
- LocalStorage満杯時の対処法表示
- インポート失敗時の詳細ログ

#### 6. パフォーマンス最適化 🟢 優先度：低
**改善点**:
- 100個以上のマイルストーン時の仮想スクロール
- requestAnimationFrameでの描画最適化
- 不要な再レンダリング削減

## 技術スタック
- Pure JavaScript (ES6+)
- CSS3（カスタムプロパティ）
- LocalStorage API
- GitHub Pages（静的ホスティング）

## ローカル起動方法
```bash
# リポジトリをクローン
git clone https://github.com/Yusuke0018/voyage-x.git
cd voyage-x

# ブラウザで開く
open index.html
```

## データ構造
```javascript
{
  version: "1.0.0",
  visions: [{
    id: "vision_xxx",
    title: "ビジョン名",
    dueDate: "YYYY-MM-DD",
    milestones: [{
      id: "ms_xxx",
      type: "day|month|range",
      startDate: "YYYY-MM-DD",
      endDate?: "YYYY-MM-DD",
      title: "マイルストーン名",
      description: "詳細"
    }]
  }]
}
```

## ⚠️ 既知の問題と制限事項

### 解決済みバグ ✅
1. ~~期間バーの幅が固定~~ → リサイズハンドル実装済み
2. ~~マイルストーンの重なり~~ → 自動高さ調整実装済み
3. ~~タッチ操作非対応~~ → タッチイベント対応済み

### 制限事項
1. **LocalStorage上限** - 約5MBまで（警告は4MBで表示）
2. **ブラウザ要件** - ES6対応必須（IE非対応）
3. **オフライン限定** - 外部同期機能なし

## 📝 次回作業時の開始手順

```bash
# 1. リポジトリ確認
cd voyage-x
git pull

# 2. ローカル起動
open index.html

# 3. 開発継続箇所
# → README.md の「🚀 次の実装タスク」参照
# → 優先度：高（🔴）から着手
```

## ライセンス
MIT