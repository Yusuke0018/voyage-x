"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[35],{235:(t,e,a)=>{a.d(e,{J:()=>o});var n=a(5155);a(2115);var i=a(489),r=a(5016);function o(t){let{className:e,...a}=t;return(0,n.jsx)(i.b,{"data-slot":"label",className:(0,r.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...a})}},2685:(t,e,a)=>{a.d(e,{t:()=>l});var n=a(2115);class i{getData(){let t=localStorage.getItem(this.storageKey);return t?JSON.parse(t):{}}saveData(t){localStorage.setItem(this.storageKey,JSON.stringify(t))}async query(t,e){let a=this.getData()[t]||[];return e?a.filter(e):a}async insert(t,e){let a=this.getData();a[t]||(a[t]=[]);let n="".concat(t,"_").concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),i={...e,id:n,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return a[t].push(i),this.saveData(a),n}async update(t,e,a){let n=this.getData();if(!n[t])return;let i=n[t].findIndex(t=>t.id===e);-1!==i&&(n[t][i]={...n[t][i],...a,updatedAt:new Date().toISOString()},this.saveData(n))}async delete(t,e){let a=this.getData();a[t]&&(a[t]=a[t].filter(t=>t.id!==e),this.saveData(a))}constructor(){this.storageKey="voyage-data"}}let r=null;async function o(){return r||(r=new i)}async function d(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];let e=await o(),a=t.match(/SELECT .* FROM ([a-zA-Z_]+)/i);if(a){let t=a[1];return e.query(t)}return[]}async function s(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=await o(),n=t.match(/INSERT INTO ([a-zA-Z_]+) \((.*?)\) VALUES/i);if(n){let t=n[1],i=n[2].split(",").map(t=>t.trim()),r={};return i.forEach((t,a)=>{r[t]=e[a]}),a.insert(t,r)}throw Error("Unsupported SQL operation")}function l(){let[t,e]=(0,n.useState)(!1),[a,i]=(0,n.useState)(null);(0,n.useEffect)(()=>{o().then(()=>e(!0)).catch(t=>i(t.message))},[]);let r=(0,n.useCallback)(async t=>{let e=crypto.randomUUID(),a=new Date().toISOString();return await s("INSERT INTO goals (id, title, description, target_date, vision, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)",[e,t.title,t.description,t.targetDate.toISOString(),t.vision||null,a,a]),e},[]),l=(0,n.useCallback)(async()=>(await d("SELECT * FROM goals ORDER BY created_at DESC")).map(t=>({id:t.id,title:t.title,description:t.description,targetDate:new Date(t.target_date),vision:t.vision,createdAt:new Date(t.created_at),updatedAt:new Date(t.updated_at)})),[]),c=(0,n.useCallback)(async(t,e)=>{let a=[],n=[];void 0!==e.title&&(a.push("title = ?"),n.push(e.title)),void 0!==e.description&&(a.push("description = ?"),n.push(e.description)),void 0!==e.targetDate&&(a.push("target_date = ?"),n.push(e.targetDate.toISOString())),void 0!==e.vision&&(a.push("vision = ?"),n.push(e.vision)),a.push("updated_at = ?"),n.push(new Date().toISOString()),n.push(t),await d("UPDATE goals SET ".concat(a.join(", ")," WHERE id = ?"),n)},[]),u=(0,n.useCallback)(async t=>{await d("DELETE FROM goals WHERE id = ?",[t])},[]),g=(0,n.useCallback)(async t=>{let e=crypto.randomUUID(),a=new Date().toISOString();return await s("INSERT INTO milestones (id, goal_id, title, description, target_date, completed, order_num, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)",[e,t.goalId,t.title,t.description||null,t.targetDate.toISOString(),+!!t.completed,t.order,a,a]),e},[]),p=(0,n.useCallback)(async t=>(await d("SELECT * FROM milestones WHERE goal_id = ? ORDER BY order_num ASC",[t])).map(t=>({id:t.id,goalId:t.goal_id,title:t.title,description:t.description,targetDate:new Date(t.target_date),completed:1===t.completed,order:t.order_num,createdAt:new Date(t.created_at),updatedAt:new Date(t.updated_at)})),[]),f=(0,n.useCallback)(async t=>{var e,a;let n=crypto.randomUUID(),i=new Date().toISOString();return await s("INSERT INTO tasks (id, milestone_id, title, description, status, priority, due_date, completed_at, dependencies, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)",[n,t.milestoneId,t.title,t.description||null,t.status,t.priority,(null==(e=t.dueDate)?void 0:e.toISOString())||null,(null==(a=t.completedAt)?void 0:a.toISOString())||null,t.dependencies?JSON.stringify(t.dependencies):null,i,i]),n},[]),m=(0,n.useCallback)(async t=>(await d("SELECT * FROM tasks WHERE milestone_id = ? ORDER BY priority DESC, created_at ASC",[t])).map(t=>({id:t.id,milestoneId:t.milestone_id,title:t.title,description:t.description,status:t.status,priority:t.priority,dueDate:t.due_date?new Date(t.due_date):void 0,completedAt:t.completed_at?new Date(t.completed_at):void 0,dependencies:t.dependencies?JSON.parse(t.dependencies):void 0,createdAt:new Date(t.created_at),updatedAt:new Date(t.updated_at)})),[]),v=(0,n.useCallback)(async(t,e)=>{let a=new Date().toISOString(),n="done"===e?a:null;await d("UPDATE tasks SET status = ?, completed_at = ?, updated_at = ? WHERE id = ?",[e,n,a,t])},[]);return{isReady:t,error:a,createGoal:r,getGoals:l,updateGoal:c,deleteGoal:u,createMilestone:g,getMilestonesByGoal:p,createTask:f,getTasksByMilestone:m,updateTaskStatus:v,saveEmotionLog:(0,n.useCallback)(async t=>{crypto.randomUUID();let e=new Date().toISOString(),a=t.date.toISOString().split("T")[0];await d("INSERT OR REPLACE INTO emotion_logs (id, date, mood, energy, note, created_at) VALUES ((SELECT id FROM emotion_logs WHERE date = ?), ?, ?, ?, ?, ?)",[a,a,t.mood,t.energy,t.note||null,e])},[]),getEmotionLogs:(0,n.useCallback)(async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30;return(await d("SELECT * FROM emotion_logs ORDER BY date DESC LIMIT ?",[t])).map(t=>({id:t.id,date:new Date(t.date),mood:t.mood,energy:t.energy,note:t.note,createdAt:new Date(t.created_at)}))},[])}}},3209:(t,e,a)=>{a.d(e,{BT:()=>s,Wu:()=>l,ZB:()=>d,Zp:()=>r,aR:()=>o});var n=a(5155);a(2115);var i=a(5016);function r(t){let{className:e,...a}=t;return(0,n.jsx)("div",{"data-slot":"card",className:(0,i.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...a})}function o(t){let{className:e,...a}=t;return(0,n.jsx)("div",{"data-slot":"card-header",className:(0,i.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...a})}function d(t){let{className:e,...a}=t;return(0,n.jsx)("div",{"data-slot":"card-title",className:(0,i.cn)("leading-none font-semibold",e),...a})}function s(t){let{className:e,...a}=t;return(0,n.jsx)("div",{"data-slot":"card-description",className:(0,i.cn)("text-muted-foreground text-sm",e),...a})}function l(t){let{className:e,...a}=t;return(0,n.jsx)("div",{"data-slot":"card-content",className:(0,i.cn)("px-6",e),...a})}},4679:(t,e,a)=>{a.d(e,{Cf:()=>u,Es:()=>p,L3:()=>f,c7:()=>g,lG:()=>d,zM:()=>s});var n=a(5155);a(2115);var i=a(1663),r=a(5229),o=a(5016);function d(t){let{...e}=t;return(0,n.jsx)(i.bL,{"data-slot":"dialog",...e})}function s(t){let{...e}=t;return(0,n.jsx)(i.l9,{"data-slot":"dialog-trigger",...e})}function l(t){let{...e}=t;return(0,n.jsx)(i.ZL,{"data-slot":"dialog-portal",...e})}function c(t){let{className:e,...a}=t;return(0,n.jsx)(i.hJ,{"data-slot":"dialog-overlay",className:(0,o.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...a})}function u(t){let{className:e,children:a,showCloseButton:d=!0,...s}=t;return(0,n.jsxs)(l,{"data-slot":"dialog-portal",children:[(0,n.jsx)(c,{}),(0,n.jsxs)(i.UC,{"data-slot":"dialog-content",className:(0,o.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...s,children:[a,d&&(0,n.jsxs)(i.bm,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,n.jsx)(r.A,{}),(0,n.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function g(t){let{className:e,...a}=t;return(0,n.jsx)("div",{"data-slot":"dialog-header",className:(0,o.cn)("flex flex-col gap-2 text-center sm:text-left",e),...a})}function p(t){let{className:e,...a}=t;return(0,n.jsx)("div",{"data-slot":"dialog-footer",className:(0,o.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...a})}function f(t){let{className:e,...a}=t;return(0,n.jsx)(i.hE,{"data-slot":"dialog-title",className:(0,o.cn)("text-lg leading-none font-semibold",e),...a})}},5016:(t,e,a)=>{a.d(e,{cn:()=>r});var n=a(2821),i=a(5889);function r(){for(var t=arguments.length,e=Array(t),a=0;a<t;a++)e[a]=arguments[a];return(0,i.QP)((0,n.$)(e))}},6170:(t,e,a)=>{a.d(e,{p:()=>r});var n=a(5155);a(2115);var i=a(5016);function r(t){let{className:e,type:a,...r}=t;return(0,n.jsx)("input",{type:a,"data-slot":"input",className:(0,i.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...r})}},7001:(t,e,a)=>{a.d(e,{T:()=>r});var n=a(5155);a(2115);var i=a(5016);function r(t){let{className:e,...a}=t;return(0,n.jsx)("textarea",{"data-slot":"textarea",className:(0,i.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...a})}},7003:(t,e,a)=>{a.d(e,{$:()=>s});var n=a(5155);a(2115);var i=a(2467),r=a(3101),o=a(5016);let d=(0,r.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function s(t){let{className:e,variant:a,size:r,asChild:s=!1,...l}=t,c=s?i.DX:"button";return(0,n.jsx)(c,{"data-slot":"button",className:(0,o.cn)(d({variant:a,size:r,className:e})),...l})}}}]);