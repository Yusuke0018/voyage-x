(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[341],{814:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(1847).A)("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])},4636:(e,s,t)=>{Promise.resolve().then(t.bind(t,7064))},7064:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>w});var a=t(5155),i=t(2115),l=t(3209),r=t(7003),n=t(6170),c=t(235),d=t(7001),h=t(4679),o=t(6191),x=t(814),m=t(1847);let j=(0,m.A)("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),p=(0,m.A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);var g=t(6485);let u=(0,m.A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var v=t(2685),N=t(63);function w(){let e=(0,N.useRouter)(),{isReady:s,getGoals:t,createGoal:m,updateGoal:w,deleteGoal:y}=(0,v.t)(),[f,k]=(0,i.useState)([]),[D,C]=(0,i.useState)(!1),[b,A]=(0,i.useState)({title:"",description:"",targetDate:new Date(Date.now()+31536e6),vision:""});(0,i.useEffect)(()=>{s&&M()},[s]);let M=async()=>{k(await t())},S=async()=>{b.title.trim()&&(await m(b),await M(),C(!1),A({title:"",description:"",targetDate:new Date(Date.now()+31536e6),vision:""}))},T=async e=>{confirm("この目標を削除しますか？")&&(await y(e),await M())};return s?(0,a.jsxs)("div",{className:"container mx-auto p-4 max-w-7xl",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"宝島への航海"}),(0,a.jsx)("p",{className:"text-muted-foreground mt-2",children:"長期目標を設定して、人生の航路を決めましょう"})]}),(0,a.jsxs)(h.lG,{open:D,onOpenChange:C,children:[(0,a.jsx)(h.zM,{asChild:!0,children:(0,a.jsxs)(r.$,{size:"lg",children:[(0,a.jsx)(o.A,{className:"mr-2 h-4 w-4"})," 新しい目標を設定"]})}),(0,a.jsxs)(h.Cf,{className:"sm:max-w-[525px]",children:[(0,a.jsx)(h.c7,{children:(0,a.jsx)(h.L3,{children:"新しい宝島を設定"})}),(0,a.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(c.J,{htmlFor:"title",children:"目標名"}),(0,a.jsx)(n.p,{id:"title",value:b.title,onChange:e=>A({...b,title:e.target.value}),placeholder:"例: Webアプリをリリースする"})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(c.J,{htmlFor:"description",children:"説明"}),(0,a.jsx)(d.T,{id:"description",value:b.description,onChange:e=>A({...b,description:e.target.value}),placeholder:"目標の詳細を入力",rows:3})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(c.J,{htmlFor:"targetDate",children:"目標日"}),(0,a.jsx)(n.p,{id:"targetDate",type:"date",value:b.targetDate.toISOString().split("T")[0],onChange:e=>A({...b,targetDate:new Date(e.target.value)})})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(c.J,{htmlFor:"vision",children:"ビジョン（任意）"}),(0,a.jsx)(d.T,{id:"vision",value:b.vision,onChange:e=>A({...b,vision:e.target.value}),placeholder:"この目標を達成したときのイメージや動機",rows:3})]})]}),(0,a.jsxs)(h.Es,{children:[(0,a.jsx)(r.$,{variant:"outline",onClick:()=>C(!1),children:"キャンセル"}),(0,a.jsx)(r.$,{onClick:S,children:"目標を作成"})]})]})]})]}),0===f.length?(0,a.jsxs)(l.Zp,{className:"p-12 text-center",children:[(0,a.jsx)(x.A,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),(0,a.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"まだ目標がありません"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"最初の宝島を設定して、航海を始めましょう"})]}):(0,a.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:f.map(s=>{let t=(e=>{let s=new Date;return Math.ceil((new Date(e).getTime()-s.getTime())/864e5)})(s.targetDate);return(0,a.jsxs)(l.Zp,{className:"hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>e.push("/milestones?goalId=".concat(s.id)),children:[(0,a.jsx)(l.aR,{children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)(l.ZB,{className:"text-xl",children:s.title}),(0,a.jsx)(l.BT,{className:"mt-2",children:s.description})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(r.$,{variant:"ghost",size:"icon",onClick:e=>{e.stopPropagation()},children:(0,a.jsx)(j,{className:"h-4 w-4"})}),(0,a.jsx)(r.$,{variant:"ghost",size:"icon",onClick:e=>{e.stopPropagation(),T(s.id)},children:(0,a.jsx)(p,{className:"h-4 w-4"})})]})]})}),(0,a.jsxs)(l.Wu,{children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,a.jsx)(g.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:new Date(s.targetDate).toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric"})})]}),(0,a.jsx)("div",{className:"text-sm",children:t>0?(0,a.jsxs)("span",{className:"text-green-600",children:["残り",t,"日"]}):(0,a.jsx)("span",{className:"text-red-600",children:"期限切れ"})}),s.vision&&(0,a.jsxs)("div",{className:"pt-2 text-sm text-muted-foreground italic",children:['"',s.vision,'"']})]}),(0,a.jsxs)("div",{className:"mt-4 flex items-center text-sm text-primary",children:[(0,a.jsx)("span",{children:"マイルストーンを表示"}),(0,a.jsx)(u,{className:"h-4 w-4 ml-1"})]})]})]},s.id)})})]}):(0,a.jsx)("div",{className:"container mx-auto p-4",children:"読み込み中..."})}}},e=>{e.O(0,[140,894,35,441,255,358],()=>e(e.s=4636)),_N_E=e.O()}]);