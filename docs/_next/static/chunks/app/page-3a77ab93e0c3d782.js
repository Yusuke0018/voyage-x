(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1362:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(1847).A)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},2685:(e,t,a)=>{"use strict";a.d(t,{t:()=>d});var r=a(2115);class s{getData(){let e=localStorage.getItem(this.storageKey);return e?JSON.parse(e):{}}saveData(e){localStorage.setItem(this.storageKey,JSON.stringify(e))}async query(e,t){let a=this.getData()[e]||[];return t?a.filter(t):a}async insert(e,t){let a=this.getData();a[e]||(a[e]=[]);let r="".concat(e,"_").concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),s={...t,id:r,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return a[e].push(s),this.saveData(a),r}async update(e,t,a){let r=this.getData();if(!r[e])return;let s=r[e].findIndex(e=>e.id===t);-1!==s&&(r[e][s]={...r[e][s],...a,updatedAt:new Date().toISOString()},this.saveData(r))}async delete(e,t){let a=this.getData();a[e]&&(a[e]=a[e].filter(e=>e.id!==t),this.saveData(a))}constructor(){this.storageKey="voyage-data"}}let i=null;async function n(){return i||(i=new s)}async function l(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];let t=await n(),a=e.match(/SELECT .* FROM ([a-zA-Z_]+)/i);if(a){let e=a[1];return t.query(e)}return[]}async function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=await n(),r=e.match(/INSERT INTO ([a-zA-Z_]+) \((.*?)\) VALUES/i);if(r){let e=r[1],s=r[2].split(",").map(e=>e.trim()),i={};return s.forEach((e,a)=>{i[e]=t[a]}),a.insert(e,i)}throw Error("Unsupported SQL operation")}function d(){let[e,t]=(0,r.useState)(!1),[a,s]=(0,r.useState)(null);(0,r.useEffect)(()=>{n().then(()=>t(!0)).catch(e=>s(e.message))},[]);let i=(0,r.useCallback)(async e=>{let t=crypto.randomUUID(),a=new Date().toISOString();return await o("INSERT INTO goals (id, title, description, target_date, vision, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)",[t,e.title,e.description,e.targetDate.toISOString(),e.vision||null,a,a]),t},[]),d=(0,r.useCallback)(async()=>(await l("SELECT * FROM goals ORDER BY created_at DESC")).map(e=>({id:e.id,title:e.title,description:e.description,targetDate:new Date(e.target_date),vision:e.vision,createdAt:new Date(e.created_at),updatedAt:new Date(e.updated_at)})),[]),c=(0,r.useCallback)(async(e,t)=>{let a=[],r=[];void 0!==t.title&&(a.push("title = ?"),r.push(t.title)),void 0!==t.description&&(a.push("description = ?"),r.push(t.description)),void 0!==t.targetDate&&(a.push("target_date = ?"),r.push(t.targetDate.toISOString())),void 0!==t.vision&&(a.push("vision = ?"),r.push(t.vision)),a.push("updated_at = ?"),r.push(new Date().toISOString()),r.push(e),await l("UPDATE goals SET ".concat(a.join(", ")," WHERE id = ?"),r)},[]),u=(0,r.useCallback)(async e=>{await l("DELETE FROM goals WHERE id = ?",[e])},[]),m=(0,r.useCallback)(async e=>{let t=crypto.randomUUID(),a=new Date().toISOString();return await o("INSERT INTO milestones (id, goal_id, title, description, target_date, completed, order_num, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)",[t,e.goalId,e.title,e.description||null,e.targetDate.toISOString(),+!!e.completed,e.order,a,a]),t},[]),p=(0,r.useCallback)(async e=>(await l("SELECT * FROM milestones WHERE goal_id = ? ORDER BY order_num ASC",[e])).map(e=>({id:e.id,goalId:e.goal_id,title:e.title,description:e.description,targetDate:new Date(e.target_date),completed:1===e.completed,order:e.order_num,createdAt:new Date(e.created_at),updatedAt:new Date(e.updated_at)})),[]),v=(0,r.useCallback)(async e=>{var t,a;let r=crypto.randomUUID(),s=new Date().toISOString();return await o("INSERT INTO tasks (id, milestone_id, title, description, status, priority, due_date, completed_at, dependencies, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)",[r,e.milestoneId,e.title,e.description||null,e.status,e.priority,(null==(t=e.dueDate)?void 0:t.toISOString())||null,(null==(a=e.completedAt)?void 0:a.toISOString())||null,e.dependencies?JSON.stringify(e.dependencies):null,s,s]),r},[]),g=(0,r.useCallback)(async e=>(await l("SELECT * FROM tasks WHERE milestone_id = ? ORDER BY priority DESC, created_at ASC",[e])).map(e=>({id:e.id,milestoneId:e.milestone_id,title:e.title,description:e.description,status:e.status,priority:e.priority,dueDate:e.due_date?new Date(e.due_date):void 0,completedAt:e.completed_at?new Date(e.completed_at):void 0,dependencies:e.dependencies?JSON.parse(e.dependencies):void 0,createdAt:new Date(e.created_at),updatedAt:new Date(e.updated_at)})),[]),h=(0,r.useCallback)(async(e,t)=>{let a=new Date().toISOString(),r="done"===t?a:null;await l("UPDATE tasks SET status = ?, completed_at = ?, updated_at = ? WHERE id = ?",[t,r,a,e])},[]);return{isReady:e,error:a,createGoal:i,getGoals:d,updateGoal:c,deleteGoal:u,createMilestone:m,getMilestonesByGoal:p,createTask:v,getTasksByMilestone:g,updateTaskStatus:h,saveEmotionLog:(0,r.useCallback)(async e=>{crypto.randomUUID();let t=new Date().toISOString(),a=e.date.toISOString().split("T")[0];await l("INSERT OR REPLACE INTO emotion_logs (id, date, mood, energy, note, created_at) VALUES ((SELECT id FROM emotion_logs WHERE date = ?), ?, ?, ?, ?, ?)",[a,a,e.mood,e.energy,e.note||null,t])},[]),getEmotionLogs:(0,r.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30;return(await l("SELECT * FROM emotion_logs ORDER BY date DESC LIMIT ?",[e])).map(e=>({id:e.id,date:new Date(e.date),mood:e.mood,energy:e.energy,note:e.note,createdAt:new Date(e.created_at)}))},[])}}},3101:(e,t,a)=>{"use strict";a.d(t,{F:()=>n});var r=a(2821);let s=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,i=r.$,n=(e,t)=>a=>{var r;if((null==t?void 0:t.variants)==null)return i(e,null==a?void 0:a.class,null==a?void 0:a.className);let{variants:n,defaultVariants:l}=t,o=Object.keys(n).map(e=>{let t=null==a?void 0:a[e],r=null==l?void 0:l[e];if(null===t)return null;let i=s(t)||s(r);return n[e][i]}),d=a&&Object.entries(a).reduce((e,t)=>{let[a,r]=t;return void 0===r||(e[a]=r),e},{});return i(e,o,null==t||null==(r=t.compoundVariants)?void 0:r.reduce((e,t)=>{let{class:a,className:r,...s}=t;return Object.entries(s).every(e=>{let[t,a]=e;return Array.isArray(a)?a.includes({...l,...d}[t]):({...l,...d})[t]===a})?[...e,a,r]:e},[]),null==a?void 0:a.class,null==a?void 0:a.className)}},3414:(e,t,a)=>{"use strict";a.d(t,{k:()=>b});var r=a(5155),s=a(2115),i=a(3468),n=a(7602),l="Progress",[o,d]=(0,i.A)(l),[c,u]=o(l),m=s.forwardRef((e,t)=>{var a,s,i,l;let{__scopeProgress:o,value:d=null,max:u,getValueLabel:m=g,...p}=e;(u||0===u)&&!x(u)&&console.error((a="".concat(u),s="Progress","Invalid prop `max` of value `".concat(a,"` supplied to `").concat(s,"`. Only numbers greater than 0 are valid max values. Defaulting to `").concat(100,"`.")));let v=x(u)?u:100;null===d||y(d,v)||console.error((i="".concat(d),l="Progress","Invalid prop `value` of value `".concat(i,"` supplied to `").concat(l,"`. The `value` prop must be:\n  - a positive number\n  - less than the value passed to `max` (or ").concat(100," if no `max` prop is set)\n  - `null` or `undefined` if the progress is indeterminate.\n\nDefaulting to `null`.")));let w=y(d,v)?d:null,b=f(w)?m(w,v):void 0;return(0,r.jsx)(c,{scope:o,value:w,max:v,children:(0,r.jsx)(n.sG.div,{"aria-valuemax":v,"aria-valuemin":0,"aria-valuenow":f(w)?w:void 0,"aria-valuetext":b,role:"progressbar","data-state":h(w,v),"data-value":null!=w?w:void 0,"data-max":v,...p,ref:t})})});m.displayName=l;var p="ProgressIndicator",v=s.forwardRef((e,t)=>{var a;let{__scopeProgress:s,...i}=e,l=u(p,s);return(0,r.jsx)(n.sG.div,{"data-state":h(l.value,l.max),"data-value":null!=(a=l.value)?a:void 0,"data-max":l.max,...i,ref:t})});function g(e,t){return"".concat(Math.round(e/t*100),"%")}function h(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function f(e){return"number"==typeof e}function x(e){return f(e)&&!isNaN(e)&&e>0}function y(e,t){return f(e)&&!isNaN(e)&&e<=t&&e>=0}v.displayName=p;var w=a(5016);function b(e){let{className:t,value:a,...s}=e;return(0,r.jsx)(m,{"data-slot":"progress",className:(0,w.cn)("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",t),...s,children:(0,r.jsx)(v,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:"translateX(-".concat(100-(a||0),"%)")}})})}},3468:(e,t,a)=>{"use strict";a.d(t,{A:()=>n,q:()=>i});var r=a(2115),s=a(5155);function i(e,t){let a=r.createContext(t),i=e=>{let{children:t,...i}=e,n=r.useMemo(()=>i,Object.values(i));return(0,s.jsx)(a.Provider,{value:n,children:t})};return i.displayName=e+"Provider",[i,function(s){let i=r.useContext(a);if(i)return i;if(void 0!==t)return t;throw Error(`\`${s}\` must be used within \`${e}\``)}]}function n(e,t=[]){let a=[],i=()=>{let t=a.map(e=>r.createContext(e));return function(a){let s=a?.[e]||t;return r.useMemo(()=>({[`__scope${e}`]:{...a,[e]:s}}),[a,s])}};return i.scopeName=e,[function(t,i){let n=r.createContext(i),l=a.length;a=[...a,i];let o=t=>{let{scope:a,children:i,...o}=t,d=a?.[e]?.[l]||n,c=r.useMemo(()=>o,Object.values(o));return(0,s.jsx)(d.Provider,{value:c,children:i})};return o.displayName=t+"Provider",[o,function(a,s){let o=s?.[e]?.[l]||n,d=r.useContext(o);if(d)return d;if(void 0!==i)return i;throw Error(`\`${a}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let a=()=>{let a=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let s=a.reduce((t,{useScope:a,scopeName:r})=>{let s=a(e)[`__scope${r}`];return{...t,...s}},{});return r.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return a.scopeName=t.scopeName,a}(i,...t)]}},4139:(e,t,a)=>{"use strict";a.d(t,{TodayCompass:()=>c});var r=a(5155),s=a(2115),i=a(7003);let n=(0,a(1847).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var l=a(9051),o=a(1362),d=a(2685);function c(){let{isReady:e,getGoals:t,getMilestonesByGoal:a,getTasksByMilestone:c,updateTaskStatus:u}=(0,d.t)(),[m,p]=(0,s.useState)([]),[v,g]=(0,s.useState)(!0);(0,s.useEffect)(()=>{e&&h()},[e]);let h=async()=>{g(!0);try{let e=await t(),r=[];for(let t of e)for(let e of(await a(t.id)))if(!e.completed){let t=await c(e.id);r.push(...t)}let s={high:0,medium:1,low:2},i={in_progress:0,todo:1,postponed:2,done:3},n=r.filter(e=>"done"!==e.status).sort((e,t)=>{let a=i[e.status]-i[t.status];return 0!==a?a:s[e.priority]-s[t.priority]}).slice(0,3);p(n)}catch(e){console.error("Failed to load tasks:",e)}finally{g(!1)}},f=async e=>{let t=m.find(t=>t.id===e);if(!t)return;let a="done"===t.status?"todo":"done";await u(e,a),await h()};return v?(0,r.jsx)("div",{children:"読み込み中..."}):(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("div",{className:"text-sm text-muted-foreground",children:"今日の重要タスク"}),0===m.length?(0,r.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"今日のタスクはありません"}):(0,r.jsx)("div",{className:"space-y-2",children:m.map(e=>(0,r.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-lg border hover:bg-accent/50 transition-colors",children:[(0,r.jsx)(i.$,{variant:"ghost",size:"sm",className:"p-0 h-auto",onClick:()=>f(e.id),children:"done"===e.status?(0,r.jsx)(o.A,{className:"w-5 h-5 text-green-600"}):(0,r.jsx)(l.A,{className:"w-5 h-5"})}),(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsx)("div",{className:"font-medium ".concat("done"===e.status?"line-through text-muted-foreground":""),children:e.title})}),(0,r.jsx)("div",{className:"flex items-center gap-2",children:(e=>{switch(e){case"high":return(0,r.jsx)(n,{className:"w-4 h-4 text-red-500"});case"medium":return(0,r.jsx)(l.A,{className:"w-4 h-4 text-yellow-500"});case"low":return(0,r.jsx)(l.A,{className:"w-4 h-4 text-green-500"});default:return(0,r.jsx)(l.A,{className:"w-4 h-4"})}})(e.priority)})]},e.id))})]})}},4706:(e,t,a)=>{Promise.resolve().then(a.bind(a,6958)),Promise.resolve().then(a.bind(a,7348)),Promise.resolve().then(a.bind(a,4139))},5016:(e,t,a)=>{"use strict";a.d(t,{cn:()=>i});var r=a(2821),s=a(5889);function i(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,r.$)(t))}},6958:(e,t,a)=>{"use strict";a.d(t,{EmotionLog:()=>o});var r=a(5155),s=a(2115),i=a(7003),n=a(7001),l=a(2685);function o(){let{isReady:e,saveEmotionLog:t,getEmotionLogs:a}=(0,l.t)(),[o,d]=(0,s.useState)(3),[c,u]=(0,s.useState)(3),[m,p]=(0,s.useState)(""),[v,g]=(0,s.useState)(null),[h,f]=(0,s.useState)(!1);(0,s.useEffect)(()=>{e&&x()},[e]);let x=async()=>{let e=await a(1),t=new Date().toISOString().split("T")[0],r=e.find(e=>new Date(e.date).toISOString().split("T")[0]===t);r&&(d(r.mood),u(r.energy),p(r.note||""),g(r))},y=async()=>{await t({date:new Date,mood:o,energy:c,note:m}),f(!0),setTimeout(()=>f(!1),2e3),await x()};return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"気分"}),(0,r.jsx)("div",{className:"flex gap-2 mt-2",children:["\uD83D\uDE22","\uD83D\uDE14","\uD83D\uDE10","\uD83D\uDE42","\uD83D\uDE04"].map((e,t)=>(0,r.jsx)(i.$,{variant:o===t+1?"default":"outline",size:"sm",onClick:()=>d(t+1),className:"text-xl",children:e},t))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"エネルギー"}),(0,r.jsx)("div",{className:"flex gap-2 mt-2 flex-wrap",children:["\uD83D\uDD0B","\uD83D\uDD0B\uD83D\uDD0B","\uD83D\uDD0B\uD83D\uDD0B\uD83D\uDD0B","\uD83D\uDD0B\uD83D\uDD0B\uD83D\uDD0B\uD83D\uDD0B","⚡"].map((e,t)=>(0,r.jsx)(i.$,{variant:c===t+1?"default":"outline",size:"sm",onClick:()=>u(t+1),className:"text-sm",children:e},t))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"メモ"}),(0,r.jsx)(n.T,{value:m,onChange:e=>p(e.target.value),placeholder:"今日の感情や出来事を記録",className:"mt-2",rows:3})]}),(0,r.jsx)(i.$,{onClick:y,className:"w-full",disabled:!e,children:v?"更新する":"記録する"}),h&&(0,r.jsx)("div",{className:"text-center text-sm text-green-600",children:"保存しました"})]})}},7001:(e,t,a)=>{"use strict";a.d(t,{T:()=>i});var r=a(5155);a(2115);var s=a(5016);function i(e){let{className:t,...a}=e;return(0,r.jsx)("textarea",{"data-slot":"textarea",className:(0,s.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...a})}},7003:(e,t,a)=>{"use strict";a.d(t,{$:()=>o});var r=a(5155);a(2115);var s=a(2467),i=a(3101),n=a(5016);let l=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function o(e){let{className:t,variant:a,size:i,asChild:o=!1,...d}=e,c=o?s.DX:"button";return(0,r.jsx)(c,{"data-slot":"button",className:(0,n.cn)(l({variant:a,size:i,className:t})),...d})}},7348:(e,t,a)=>{"use strict";a.d(t,{ProgressSummary:()=>i});var r=a(5155),s=a(3414);function i(){return(0,r.jsx)("div",{className:"space-y-6",children:[{id:"1",title:"Webアプリケーションの完成",progress:65,milestonesCompleted:3,milestonesTotal:5},{id:"2",title:"プログラミングスキル向上",progress:40,milestonesCompleted:2,milestonesTotal:6}].map(e=>(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("h3",{className:"font-medium",children:e.title}),(0,r.jsxs)("span",{className:"text-sm text-muted-foreground",children:[e.progress,"%"]})]}),(0,r.jsx)(s.k,{value:e.progress,className:"h-2"}),(0,r.jsxs)("div",{className:"text-sm text-muted-foreground",children:[e.milestonesCompleted," / ",e.milestonesTotal," マイルストーン達成"]})]},e.id))})}},9051:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(1847).A)("circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])}},e=>{e.O(0,[140,441,255,358],()=>e(e.s=4706)),_N_E=e.O()}]);